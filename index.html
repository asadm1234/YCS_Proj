<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WellnessTracker</title>
    <meta name="description" content="Track your daily health habits and improve your well-being">
    <meta name="theme-color" content="#4299e1">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f8fffe;
            color: #2d3748;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px 0;
        }

        .header h1 {
            color: #2b6cb0;
            font-size: 2.2em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            color: #4a5568;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .sdg-badge {
            display: inline-block;
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .main-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e2e8f0;
            overflow-x: auto;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            font-weight: 500;
            color: #4a5568;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .tab-btn.active {
            background: #4299e1;
            color: white;
        }

        .tab-btn:hover:not(.active) {
            background: #edf2f7;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            margin-bottom: 35px;
        }

        .section h2 {
            color: #2d3748;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .daily-checklist {
            display: grid;
            gap: 12px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid #cbd5e0;
            transition: all 0.2s ease;
        }

        .checklist-item:hover {
            background: #edf2f7;
            transform: translateX(2px);
        }

        .checklist-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
            accent-color: #4299e1;
        }

        .checklist-item label {
            flex: 1;
            cursor: pointer;
            font-weight: 400;
        }

        .checklist-item.completed {
            background: #f0fff4;
            border-left-color: #48bb78;
        }

        .checklist-item.completed label {
            text-decoration: line-through;
            color: #68d391;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 6px;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        .btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #68d391;
            color: white;
        }

        .btn-secondary:hover {
            background: #48bb78;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: 700;
            color: #2b6cb0;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #4a5568;
            font-size: 0.9em;
            font-weight: 500;
        }

        .mood-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .mood-btn {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            font-size: 1.5em;
        }

        .mood-btn:hover {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .mood-btn.selected {
            border-color: #4299e1;
            background: #4299e1;
            color: white;
        }

        .water-tracker {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #ebf8ff;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .water-visual {
            display: flex;
            gap: 8px;
        }

        .water-glass {
            width: 25px;
            height: 35px;
            border: 2px solid #4299e1;
            border-radius: 4px;
            position: relative;
            background: #f7fafc;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .water-glass:hover {
            transform: scale(1.1);
        }

        .water-glass.filled {
            background: #4299e1;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
            display: none;
        }

        .history-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #4299e1;
        }

        .history-date {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .history-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            font-size: 0.9em;
            color: #4a5568;
        }

        .date-selector {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .no-data {
            text-align: center;
            color: #718096;
            padding: 40px 20px;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .mood-selector {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• WellnessTracker</h1>
            <p>Your personal health and well-being assistant</p>
            <div class="sdg-badge">üéØ UN SDG 3: Good Health and Well-being</div>
        </div>

        <div class="main-content">
            <!-- Navigation Tabs -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('today')">üìÖ Today</button>
                <button class="tab-btn" onclick="switchTab('history')">üìä History</button>
                <button class="tab-btn" onclick="switchTab('trends')">üìà Trends</button>
            </div>

            <!-- Today Tab -->
            <div id="today-tab" class="tab-content active">
                <!-- Daily Progress Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="todayScore">0</div>
                        <div class="stat-label">Wellness Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="streakDays">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completedTasks">0/10</div>
                        <div class="stat-label">Tasks Done</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalDays">0</div>
                        <div class="stat-label">Days Tracked</div>
                    </div>
                </div>

                <!-- Success Message -->
                <div id="successMessage" class="success-message">
                    ‚úÖ Today's wellness data has been saved successfully!
                </div>

                <!-- Daily Health Checklist -->
                <div class="section">
                    <h2>üìã Daily Health Checklist</h2>
                    <div class="daily-checklist" id="checklist">
                        <!-- Checklist items will be populated here -->
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; color: #4a5568; font-size: 0.9em;">
                        <span id="progressText">0 of 10 tasks completed today</span>
                    </p>
                </div>

                <!-- Water Intake Tracker -->
                <div class="section">
                    <h2>üíß Water Intake</h2>
                    <div class="water-tracker">
                        <div class="water-visual" id="waterGlasses">
                            <!-- Water glasses will be generated here -->
                        </div>
                        <div>
                            <p><strong id="waterCount">0</strong> glasses today (Goal: 8)</p>
                            <button class="btn btn-secondary" onclick="addWater()" style="margin-top: 8px;">Add Glass +1</button>
                            <button class="btn" onclick="removeWater()" style="margin-top: 8px; margin-left: 8px; background: #e53e3e;">Remove -1</button>
                        </div>
                    </div>
                </div>

                <!-- Mood Tracker -->
                <div class="section">
                    <h2>üòä How are you feeling today?</h2>
                    <div class="mood-selector">
                        <div class="mood-btn" data-mood="terrible" onclick="selectMood('terrible', 'üò∞')">üò∞<br><small>Terrible</small></div>
                        <div class="mood-btn" data-mood="bad" onclick="selectMood('bad', 'üòû')">üòû<br><small>Bad</small></div>
                        <div class="mood-btn" data-mood="okay" onclick="selectMood('okay', 'üòê')">üòê<br><small>Okay</small></div>
                        <div class="mood-btn" data-mood="good" onclick="selectMood('good', 'üòä')">üòä<br><small>Good</small></div>
                        <div class="mood-btn" data-mood="excellent" onclick="selectMood('excellent', 'üòÑ')">üòÑ<br><small>Excellent</small></div>
                    </div>
                    <div class="form-group">
                        <label>What's affecting your mood today? (optional)</label>
                        <textarea id="moodNotes" placeholder="Work stress, good sleep, exercise, social time..." rows="2"></textarea>
                    </div>
                </div>

                <!-- Quick Health Log -->
                <div class="section">
                    <h2>üìù Health Details</h2>
                    <div class="form-group">
                        <label>Hours of sleep last night</label>
                        <input type="number" id="sleepHours" min="0" max="12" step="0.5" placeholder="7.5">
                    </div>
                    <div class="form-group">
                        <label>Energy level (1-10)</label>
                        <input type="range" id="energyLevel" min="1" max="10" value="5" oninput="updateEnergyDisplay()">
                        <span id="energyDisplay">5/10</span>
                    </div>
                    <div class="form-group">
                        <label>Exercise/Physical Activity</label>
                        <input type="text" id="exercise" placeholder="30 min walk, gym workout, yoga, etc.">
                    </div>
                    <div class="form-group">
                        <label>Any symptoms or concerns?</label>
                        <input type="text" id="symptoms" placeholder="Headache, back pain, feeling great, etc.">
                    </div>
                    <button class="btn" onclick="saveHealthLog()" style="width: 100%; padding: 15px; font-size: 16px; font-weight: 600;">
                        üíæ Save Today's Wellness Data
                    </button>
                </div>
            </div>

            <!-- History Tab -->
            <div id="history-tab" class="tab-content">
                <div class="section">
                    <h2>üìä Your Wellness History</h2>
                    <div class="date-selector">
                        <label for="historyDate">View specific date:</label>
                        <input type="date" id="historyDate" onchange="loadHistoryDate()">
                        <button class="btn" onclick="clearAllData()" style="margin-left: 10px; background: #e53e3e;">Clear All Data</button>
                    </div>
                    <div id="historyContent">
                        <!-- History will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Trends Tab -->
            <div id="trends-tab" class="tab-content">
                <div class="section">
                    <h2>üìà Your Wellness Trends</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="avgScore">0</div>
                            <div class="stat-label">Average Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="bestStreak">0</div>
                            <div class="stat-label">Best Streak</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalWater">0</div>
                            <div class="stat-label">Total Water (glasses)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="avgSleep">0</div>
                            <div class="stat-label">Avg Sleep (hours)</div>
                        </div>
                    </div>
                    <div id="trendsContent">
                        <p class="no-data">Start tracking your wellness to see trends and insights!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // App state - starts completely fresh
        let appState = {
            waterGlasses: 0,
            currentMood: null,
            checkedItems: new Set(),
            todayScore: 0,
            streak: 0,
            totalDays: 0
        };

        // Daily health checklist items
        const checklistItems = [
            "Drank at least 8 glasses of water",
            "Got 7-9 hours of sleep",
            "Ate at least 3 servings of fruits/vegetables",
            "Did 30 minutes of physical activity",
            "Took breaks from screen time",
            "Practiced deep breathing or meditation",
            "Connected with friends or family",
            "Spent time outdoors or in natural light",
            "Took vitamins or medications as prescribed",
            "Maintained good posture throughout the day"
        ];

        // Get today's date string
        function getTodayString() {
            return new Date().toISOString().split('T')[0];
        }

        // Initialize app
        function init() {
            loadTodayData();
            renderChecklist();
            renderWaterTracker();
            updateProgress();
            updateStats();
            loadHistory();
        }

        // Load today's data from localStorage
        function loadTodayData() {
            const today = getTodayString();
            const saved = localStorage.getItem(`wellness_${today}`);
            
            if (saved) {
                const data = JSON.parse(saved);
                appState.waterGlasses = data.waterGlasses || 0;
                appState.checkedItems = new Set(data.checkedItems || []);
                appState.currentMood = data.currentMood || null;
                
                // Set form values
                if (data.sleepHours) document.getElementById('sleepHours').value = data.sleepHours;
                if (data.energyLevel) document.getElementById('energyLevel').value = data.energyLevel;
                if (data.exercise) document.getElementById('exercise').value = data.exercise;
                if (data.symptoms) document.getElementById('symptoms').value = data.symptoms;
                if (data.moodNotes) document.getElementById('moodNotes').value = data.moodNotes;
                
                // Update mood selector
                if (data.currentMood) {
                    document.querySelectorAll('.mood-btn').forEach(btn => {
                        btn.classList.remove('selected');
                        if (btn.dataset.mood === data.currentMood) {
                            btn.classList.add('selected');
                        }
                    });
                }
                
                updateEnergyDisplay();
            }
        }

        // Save today's data
        function saveTodayData() {
            const today = getTodayString();
            const data = {
                date: today,
                waterGlasses: appState.waterGlasses,
                checkedItems: Array.from(appState.checkedItems),
                currentMood: appState.currentMood,
                sleepHours: document.getElementById('sleepHours').value,
                energyLevel: document.getElementById('energyLevel').value,
                exercise: document.getElementById('exercise').value,
                symptoms: document.getElementById('symptoms').value,
                moodNotes: document.getElementById('moodNotes').value,
                wellnessScore: appState.todayScore,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem(`wellness_${today}`, JSON.stringify(data));
            
            // Update global stats
            updateGlobalStats();
        }

        // Update global statistics
        function updateGlobalStats() {
            const allDays = getAllSavedDays();
            const totalDays = allDays.length;
            
            // Calculate streak
            let currentStreak = 0;
            const today = new Date();
            
            for (let i = 0; i < 30; i++) { // Check last 30 days
                const checkDate = new Date(today);
                checkDate.setDate(checkDate.getDate() - i);
                const dateStr = checkDate.toISOString().split('T')[0];
                
                if (localStorage.getItem(`wellness_${dateStr}`)) {
                    currentStreak++;
                } else {
                    break;
                }
            }
            
            appState.streak = currentStreak;
            appState.totalDays = totalDays;
            
            // Save global stats
            const globalStats = {
                streak: currentStreak,
                totalDays: totalDays,
                lastUpdated: new Date().toISOString()
            };
            
            localStorage.setItem('wellness_global', JSON.stringify(globalStats));
        }

        // Get all saved days
        function getAllSavedDays() {
            const days = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && key.startsWith('wellness_') && key !== 'wellness_global') {
                    const data = JSON.parse(localStorage.getItem(key));
                    days.push(data);
                }
            }
            return days.sort((a, b) => new Date(b.date) - new Date(a.date));
        }

        // Switch tabs
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.classList.add('active');
            
            // Load tab-specific data
            if (tabName === 'history') {
                loadHistory();
            } else if (tabName === 'trends') {
                loadTrends();
            }
        }

        // Render checklist
        function renderChecklist() {
            const checklist = document.getElementById('checklist');
            checklist.innerHTML = checklistItems.map((item, index) => `
                <div class="checklist-item ${appState.checkedItems.has(index) ? 'completed' : ''}">
                    <input type="checkbox" 
                           id="task-${index}" 
                           ${appState.checkedItems.has(index) ? 'checked' : ''}
                           onchange="toggleTask(${index})">
                    <label for="task-${index}">${item}</label>
                </div>
            `).join('');
        }

        // Toggle checklist task
        function toggleTask(index) {
            if (appState.checkedItems.has(index)) {
                appState.checkedItems.delete(index);
            } else {
                appState.checkedItems.add(index);
            }
            
            renderChecklist();
            updateProgress();
            calculateWellnessScore();
        }

        // Render water tracker
        function renderWaterTracker() {
            const container = document.getElementById('waterGlasses');
            container.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const glass = document.createElement('div');
                glass.className = `water-glass ${i < appState.waterGlasses ? 'filled' : ''}`;
                glass.onclick = () => setWaterGlasses(i + 1);
                container.appendChild(glass);
            }
            
            document.getElementById('waterCount').textContent = appState.waterGlasses;
        }

        // Add water glass
        function addWater() {
            if (appState.waterGlasses < 8) {
                appState.waterGlasses++;
                renderWaterTracker();
                calculateWellnessScore();
                
                if (appState.waterGlasses === 8) {
                    showMessage('üéâ Great job! You\'ve reached your daily water goal!');
                }
            } else {
                appState.waterGlasses++;
                renderWaterTracker();
                calculateWellnessScore();
                showMessage('You\'ve exceeded your daily water goal! Great hydration! üíß');
            }
        }

        // Remove water glass
        function removeWater() {
            if (appState.waterGlasses > 0) {
                appState.waterGlasses--;
                renderWaterTracker();
                calculateWellnessScore();
            }
        }

        // Set water glasses directly
        function setWaterGlasses(count) {
            appState.waterGlasses = count;
            renderWaterTracker();
            calculateWellnessScore();
        }

        // Select mood
        function selectMood(mood, emoji) {
            document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            appState.currentMood = mood;
            calculateWellnessScore();
        }

        // Update energy display
        function updateEnergyDisplay() {
            const value = document.getElementById('energyLevel').value;
            document.getElementById('energyDisplay').textContent = `${value}/10`;
        }

        // Update progress bar
        function updateProgress() {
            const completed = appState.checkedItems.size;
            const total = checklistItems.length;
            const percentage = (completed / total) * 100;
            
            document.getElementById('progressFill').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `${completed} of ${total} tasks completed today`;
            document.getElementById('completedTasks').textContent = `${completed}/${total}`;
        }

        // Calculate wellness score
        function calculateWellnessScore() {
            let score = 0;
            
            // Checklist completion (40 points max)
            score += (appState.checkedItems.size / checklistItems.length) * 40;
            
            // Water intake (20 points max)
            score += Math.min(appState.waterGlasses / 8, 1) * 20;
            
            // Mood (20 points max)
            const moodScores = {
                'terrible': 0,
                'bad': 5,
                'okay': 10,
                'good': 15,
                'excellent': 20
            };
            score += moodScores[appState.currentMood] || 0;
            
            // Sleep (20 points max)
            const sleepHours = parseFloat(document.getElementById('sleepHours').value) || 0;
            if (sleepHours >= 7 && sleepHours <= 9) {
                score += 20;
            } else if (sleepHours >= 6 && sleepHours <= 10) {
                score += 15;
            } else if (sleepHours > 0) {
                score += 10;
            }
            
            appState.todayScore = Math.round(score);
            document.getElementById('todayScore').textContent = appState.todayScore;
        }

        // Update statistics
        function updateStats() {
            const globalStats = localStorage.getItem('wellness_global');
            if (globalStats) {
                const stats = JSON.parse
